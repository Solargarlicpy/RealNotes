<Window x:Class="RealNotes.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:RealNotes"
        mc:Ignorable="d"
        Title="RealNotes" Height="450" Width="800"
        MinHeight="350" MinWidth="500"
        Background="#FFFDFBEF">

    <Window.Resources>
        <local:ScaleFontConverter x:Key="ScaleFontConverter"/>
        <local:ColorNameToBrushConverter x:Key="ColorNameToBrushConverter"/>
    </Window.Resources>

    <DockPanel>
        <!-- Toolbar -->
        <Border x:Name="ToolbarBorder" DockPanel.Dock="Top"
                Background="Fuchsia"
                Padding="1"
                BorderBrush="SlateBlue"
                BorderThickness="0 0 0 1">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left spacing (for centering) -->
                <StackPanel Grid.Column="1"/>

                <!-- Centered toolbar buttons -->
                <StackPanel Grid.Column="1"
                            Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Margin="4"
                            MinHeight="20">
                    <Button x:Name="AddNoteButton"
                            Content="Add Note"
                            Click="AddNote_Click"
                            Margin="4"
                            Padding="6,3"
                            Background="DarkOrchid"
                            MinWidth="100"
                            FontSize="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource ScaleFontConverter}, ConverterParameter=0.02}" />

                    <Button x:Name="RemoveNoteButton"
                            Content="Remove Note"
                            Click="RemoveNote_Click"
                            Margin="4"
                            Padding="6,3"
                            Background="MediumAquamarine"
                            MinWidth="100"
                            FontSize="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource ScaleFontConverter}, ConverterParameter=0.02}" />
                    <Button Content="Save" Click="SaveButton_Click" Margin="4" Padding="6,3" MinWidth="80" Background="GreenYellow"/>
                    <Button Content="Load" Click="LoadButton_Click" Margin="4" Padding="6,3" MinWidth="80" Background="Cyan"/>
                    
                    <!-- ComboBox now matches the buttons' sizing and font scaling -->
                    <ComboBox x:Name="ColorPicker"
                              MinWidth="100"
                              SelectionChanged="ColorPicker_SelectionChanged"
                              Margin="6"
                              VerticalAlignment="Center"
                              Background="LightYellow"
                              Padding="6,3"
                              FontSize="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource ScaleFontConverter}, ConverterParameter=0.02}">
                        <ComboBox.ItemTemplate>
                            <!-- show a small swatch in the dropdown next to the color name -->
                            <DataTemplate>
                                <DockPanel LastChildFill="True" Margin="2">
                                    <Rectangle Width="14" Height="14" Fill="{Binding Content, RelativeSource={RelativeSource AncestorType=ComboBoxItem}, Converter={StaticResource ColorNameToBrushConverter}}" Stroke="Gray" Margin="0,0,6,0" />
                                    <TextBlock VerticalAlignment="Center" Text="{Binding Content}" />
                                </DockPanel>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>

                        <ComboBoxItem Content="Yellow" IsSelected="True"/>
                        <ComboBoxItem Content="Green"/>
                        <ComboBoxItem Content="Blue"/>
                        <ComboBoxItem Content="Pink"/>
                        <ComboBoxItem Content="White"/>
                        <ComboBoxItem Content="Chartreuse"/>
                        <ComboBoxItem Content="Violet"/>
                        <ComboBoxItem Content="Orange"/>
                    </ComboBox>
                </StackPanel>

                <!-- Right spacing -->
                <StackPanel Grid.Column="2"/>
            </Grid>
        </Border>


        <!-- Notes Container -->
        <ScrollViewer VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled"
                      PanningMode="VerticalOnly"
                      CanContentScroll="False"
                      Margin="10">
            <ScrollViewer.Resources>
                <!-- scrollbar -->
                <Style TargetType="ScrollBar">
                    <Setter Property="Width" Value="6"/>
                    <Setter Property="Background" Value="SkyBlue"/>
                </Style>
            </ScrollViewer.Resources>

            <!-- Use a Canvas so notes can be absolutely positioned, moved and resized by the user -->
            <Canvas x:Name="NotesCanvas"
                    Background="Transparent"
                    Focusable="True"
                    MouseLeftButtonDown="NotesCanvas_MouseLeftButtonDown"/>
        </ScrollViewer>
    </DockPanel>
</Window>



